:NewParser
:NewDefs

let x = 1
//│ IR:
//│ Basic Block entry:
//│   x1 = 1
//│ 
//│ WASM:
//│ Code(List(I32Const(1), SetLocal(0), Comment(TODO)))
//│ let x: 1
//│ x
//│   = 1

let x = {field1: 0, field2: 1}
//│ IR:
//│ Mls2ir failed: scala.NotImplementedError: an implementation is missing
//│ let x: {field1: 0, field2: 1}
//│ x
//│   = { field1: 0, field2: 1 }

if true then 1 else 0
let x = 3
//│ IR:
//│ Basic Block entry:
//│   match true
//│     true () -> b
//│     false () -> c
//│ Basic Block c:
//│   br d ()
//│ Basic Block d:
//│   x1 = 3
//│ Basic Block b:
//│   br d ()
//│ 
//│ WASM:
//│ Ir2wasm failed: scala.NotImplementedError: an implementation is missing
//│ let x: 3
//│ 0 | 1
//│ res
//│     = 1
//│ x
//│   = 3

class IntLit(head: Int)
let l = IntLit(2)
if l is
    IntLit(0) then
        let x = 0
    IntLit(1) then
        let x = 1
    IntLit(2) then
        let x = 2
    else
        let x = 3
let y = 1
//│ IR:
//│ Basic Block entry:
//│   new_IntLit1 = alloc IntLit
//│   app_result = call new_IntLit1 (2)
//│   l1 = app_result
//│   match l1
//│     IntLit (0) -> b
//│     IntLit (1) -> c
//│     IntLit (2) -> d
//│     else () -> e
//│ Basic Block e:
//│   x3 = 3
//│   br a ()
//│ Basic Block a:
//│   y1 = 1
//│ Basic Block d:
//│   x2 = 2
//│   br a ()
//│ Basic Block c:
//│   x1 = 1
//│   br a ()
//│ Basic Block b:
//│   x = 0
//│   br a ()
//│ 
//│ WASM:
//│ Ir2wasm failed: scala.NotImplementedError: an implementation is missing
//│ class IntLit(head: Int)
//│ let l: IntLit
//│ let y: 1
//│ undefined
//│ l
//│   = IntLit {}
//│ res
//│     = undefined
//│ y
//│   = 1
